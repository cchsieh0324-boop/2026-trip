<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>千葉秋旅 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'jp-stone': '#f5f5f4',
                        'jp-ink': '#1c1917',
                        'jp-blue': '#312e81', // 藍染
                        'jp-red': '#be123c',  // 鳥居紅
                        'jp-accent': '#d97706' // 金木犀
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #e7e5e4; }
        .app-container { max-width: 480px; margin: 0 auto; background-color: #fafaf9; min-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.1); position: relative; padding-bottom: 80px;}
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-top: 1px solid rgba(0,0,0,0.05); }
    </style>
</head>
<body class="text-jp-ink antialiased">

<div class="app-container" id="app">
    
    <header class="sticky top-0 z-50 bg-jp-stone/95 backdrop-blur shadow-sm px-4 py-3 flex justify-between items-center">
        <div>
            <h1 class="text-lg font-bold tracking-widest text-jp-blue">千葉秋旅</h1>
            <p class="text-xs text-gray-500">2025.10.08 - 10.15</p>
        </div>
        <div class="text-right">
            <div class="text-xs font-medium bg-blue-100 text-blue-800 px-2 py-1 rounded-full">
                <i class="fas fa-cloud-sun mr-1"></i> <span id="weather-temp">22°C</span>
            </div>
        </div>
    </header>

    <main class="p-4 space-y-6" id="main-content">
        </main>

    <nav class="fixed bottom-0 left-0 right-0 z-50 glass-nav max-w-[480px] mx-auto pb-safe">
        <div class="flex justify-around items-center h-16">
            <button onclick="renderItinerary()" class="flex flex-col items-center justify-center w-full h-full text-jp-blue focus:outline-none">
                <i class="fas fa-map-marked-alt text-xl mb-1"></i>
                <span class="text-[10px]">行程</span>
            </button>
            <button onclick="renderInfo()" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-jp-blue focus:outline-none">
                <i class="fas fa-passport text-xl mb-1"></i>
                <span class="text-[10px]">資訊</span>
            </button>
            <button onclick="renderWallet()" class="flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-jp-blue focus:outline-none">
                <i class="fas fa-wallet text-xl mb-1"></i>
                <span class="text-[10px]">預算</span>
            </button>
        </div>
    </nav>

</div>

<script>
    // --- Data Source (Parsed from your CSVs) ---
    const tripData = {
        days: [
            {
                date: "10/08 (三)",
                loc: "成田",
                weather: "晴時多雲",
                events: [
                    { time: "12:00", type: "flight", title: "抵達日本 (T2)", desc: "華航 CI104 (12:40-16:55)", nav: "成田機場第二航廈" },
                    { time: "17:30", type: "hotel", title: "Check-in", desc: "Meet Inn Narita (車站旁)", nav: "Meet Inn Narita" },
                    { time: "18:00", type: "food", title: "晚餐：成田周邊", desc: "也可吃日高屋/王將餃子，或前往AEON", nav: "成田駅" },
                    { time: "19:00", type: "food", title: "燒肉預約 (重要)", desc: "焼肉屋田中商店 開運橋店 (預約號: SCU511187)", nav: "焼肉屋田中商店 開運橋店", highlight: true },
                    { time: "20:00", type: "shop", title: "AEON 購物", desc: "超市開到10點，Honeys在1F", nav: "AEON Town Narita Tomisato" }
                ]
            },
            {
                date: "10/09 (四)",
                loc: "成田/佐原",
                weather: "晴天",
                events: [
                    { time: "08:00", type: "spot", title: "成田山新勝寺", desc: "參拜、成田山公園散步", nav: "成田山新勝寺" },
                    { time: "10:00", type: "shop", title: "伴手禮：NAGOMI米屋", desc: "必買：焦糖蘋果銅鑼燒、花生最中", nav: "なごみの米屋 総本店", badge: "必買" },
                    { time: "12:00", type: "food", title: "午餐：鰻魚/蕎麥麵", desc: "川豐本店 (老店) 或 雞白湯拉麵 福一", nav: "川豊 本店" },
                    { time: "14:00", type: "spot", title: "房總之村", desc: "體驗古街商家、拍照", nav: "千葉県立房総のむら" },
                    { time: "18:00", type: "spot", title: "飯田町秋祭", desc: "第43次飯田町秋季節日，看山車", nav: "成田市飯田町" }
                ]
            },
            {
                date: "10/10 (五)",
                loc: "佐原 (祭典)",
                weather: "多雲",
                note: "★佐原大祭重点日",
                events: [
                    { time: "08:40", type: "transport", title: "前往佐原", desc: "JR成田線 -> 佐原駅 (約30分)", nav: "佐原駅" },
                    { time: "10:00", type: "spot", title: "佐原大祭", desc: "山車會館、坐船、渡登神社 (八世紀創建)", nav: "佐原山車会館" },
                    { time: "12:15", type: "food", title: "午餐預約", desc: "Auberge de Manoir KITTEI (法式料理)", nav: "Auberge de Manoir KITTEI", highlight: true },
                    { time: "14:00", type: "spot", title: "山車巡行", desc: "14台山車曳行，注意「の字廻し」旋轉技巧", nav: "伊能忠敬旧宅" },
                    { time: "17:00", type: "spot", title: "夜間山車點燈", desc: "小野川河邊風景+燈籠點燈，極美", nav: "小野川佐原" },
                    { time: "20:40", type: "transport", title: "回程", desc: "搭電車回成田 (注意末班車)", nav: "佐原駅" }
                ]
            },
            {
                date: "10/11 (六)",
                loc: "千葉市",
                weather: "晴天",
                events: [
                    { time: "09:00", type: "spot", title: "成田夢牧場", desc: "接駁車09:10/09:40。擠牛奶、吃霜淇淋", nav: "成田ゆめ牧場" },
                    { time: "13:00", type: "transport", title: "移動至千葉市", desc: "JR成田 -> JR千葉 -> 稻毛車站", nav: "千葉駅" },
                    { time: "15:00", type: "hotel", title: "飯店 Check-in", desc: "Hotel Sunroute Chiba (先寄行李)", nav: "Hotel Sunroute Chiba" },
                    { time: "16:30", type: "spot", title: "千葉港夜景", desc: "搭單軌電車去看夕陽/工廠夜景", nav: "千葉ポートタワー" },
                    { time: "19:00", type: "food", title: "晚餐：大眾燒肉", desc: "大衆ホルモン酒場 たけ田 (烤腸)", nav: "千葉駅" }
                ]
            },
            {
                date: "10/12 (日)",
                loc: "幕張/千葉",
                weather: "多雲時雨",
                events: [
                    { time: "10:00", type: "shop", title: "西松屋 / 購物", desc: "採買嬰幼兒用品", nav: "西松屋 千葉" },
                    { time: "12:00", type: "food", title: "午餐：長谷川食堂", desc: "人氣海鮮丼", nav: "長谷川食堂" },
                    { time: "14:00", type: "spot", title: "幕張海濱公園", desc: "散步、看海", nav: "幕張海浜公園" },
                    { time: "15:30", type: "shop", title: "三井 Outlet", desc: "幕張 Outlet 購物", nav: "三井アウトレットパーク 幕張" },
                    { time: "20:00", type: "spot", title: "千葉神社", desc: "夜間參拜，很漂亮", nav: "千葉神社" }
                ]
            },
            {
                date: "10/13 (一)",
                loc: "浦安/迪士尼",
                weather: "晴天",
                events: [
                    { time: "09:00", type: "transport", title: "寄送行李 (重要)", desc: "寄到明天住宿: Spa & Hotel Maihama Eurasia", highlight: true },
                    { time: "11:00", type: "spot", title: "千葉散策/購物", desc: "Perie 千葉 / SOGO 百貨", nav: "SOGO 千葉店" },
                    { time: "14:00", type: "transport", title: "前往浦安/迪士尼區", desc: "JR京葉線 -> 舞濱/新浦安", nav: "舞浜駅" },
                    { time: "18:00", type: "spot", title: "IKSPIARI", desc: "迪士尼旁購物中心吃晚餐", nav: "IKSPIARI" }
                ]
            },
             {
                date: "10/14 (二)",
                loc: "迪士尼",
                weather: "晴天",
                events: [
                    { time: "08:00", type: "spot", title: "迪士尼 / 浦安", desc: "全日活動 / 飯店享受 SPA", nav: "Tokyo DisneySea" },
                    { time: "10:10", type: "transport", title: "利木津巴士", desc: "若需搭乘請確認時間", nav: "東京ディズニーシー" },
                    { time: "18:00", type: "hotel", title: "入住", desc: "Spa & Hotel Maihama Eurasia (溫泉)", nav: "Spa & Hotel Maihama Eurasia" }
                ]
            },
            {
                date: "10/15 (三)",
                loc: "返程",
                weather: "多雲",
                events: [
                    { time: "10:00", type: "shop", title: "最後購物", desc: "機場亂買 / 伴手禮補貨", nav: "Haneda Airport" },
                    { time: "14:30", type: "flight", title: "返程班機", desc: "華航 CI221 羽田(T3) -> 松山 (14:30-16:55)", nav: "Haneda Airport Terminal 3" }
                ]
            }
        ],
        info: {
            hotels: [
                { name: "Meet Inn Narita", addr: "904 Hanazakicho, Narita", tel: "+81 476-23-1113" },
                { name: "Hotel Sunroute Chiba", addr: "Westrio 1F, 1-4-1 Shin-Chiba", tel: "" },
                { name: "Spa & Hotel Maihama Eurasia", addr: "279-0032 Chiba, Urayasu, Chidori 13-20", tel: "+81 47-351-4126", note: "行李寄送地" }
            ],
            emergency: [
                { title: "旅外國人急難救助", val: "+81-3-3280-7917" },
                { title: "警察 / 救護", val: "110 / 119" }
            ]
        }
    };

    // --- Render Functions ---

    function getIcon(type) {
        const icons = {
            flight: 'fa-plane-departure',
            hotel: 'fa-bed',
            food: 'fa-utensils',
            spot: 'fa-camera',
            shop: 'fa-shopping-bag',
            transport: 'fa-train'
        };
        return icons[type] || 'fa-circle';
    }

    function getColor(type) {
        const colors = {
            flight: 'text-gray-500',
            hotel: 'text-jp-blue',
            food: 'text-jp-accent',
            spot: 'text-jp-red',
            shop: 'text-purple-600',
            transport: 'text-green-600'
        };
        return colors[type] || 'text-gray-400';
    }

    function renderItinerary() {
        const container = document.getElementById('main-content');
        container.innerHTML = '';

        // Reset Nav styles
        updateNavState(0);

        tripData.days.forEach((day, index) => {
            const dayCard = document.createElement('div');
            dayCard.className = 'bg-white rounded-xl shadow-sm overflow-hidden mb-6 border border-stone-200';
            
            let eventsHtml = '';
            day.events.forEach(evt => {
                const navLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(evt.nav)}`;
                const highlightClass = evt.highlight ? 'bg-yellow-50 border-l-4 border-yellow-400' : '';
                const badgeHtml = evt.badge ? `<span class="ml-2 text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200">${evt.badge}</span>` : '';

                eventsHtml += `
                    <div class="relative pl-6 py-3 border-l border-stone-200 ml-4 hover:bg-stone-50 transition ${highlightClass}">
                        <div class="absolute -left-1.5 top-4 w-3 h-3 rounded-full bg-white border-2 border-stone-300"></div>
                        <div class="flex justify-between items-start pr-4">
                            <div class="flex-1">
                                <div class="text-xs font-bold text-stone-400 mb-0.5">${evt.time} <i class="fas ${getIcon(evt.type)} ${getColor(evt.type)} ml-1"></i></div>
                                <h3 class="text-sm font-bold text-jp-ink">${evt.title} ${badgeHtml}</h3>
                                <p class="text-xs text-stone-500 mt-1 leading-relaxed">${evt.desc}</p>
                            </div>
                            <a href="${navLink}" target="_blank" class="flex-shrink-0 ml-3 text-jp-blue bg-blue-50 p-2 rounded-full hover:bg-blue-100">
                                <i class="fas fa-location-arrow text-sm"></i>
                            </a>
                        </div>
                    </div>
                `;
            });

            dayCard.innerHTML = `
                <div class="bg-jp-stone px-4 py-2 border-b border-stone-200 flex justify-between items-center">
                    <h2 class="font-bold text-jp-blue"><i class="far fa-calendar-alt mr-2"></i>${day.date}</h2>
                    <span class="text-xs text-stone-500 bg-white px-2 py-1 rounded-md shadow-sm">${day.weather}</span>
                </div>
                ${day.note ? `<div class="bg-yellow-100 text-yellow-800 text-xs px-4 py-1"><i class="fas fa-info-circle mr-1"></i>${day.note}</div>` : ''}
                <div class="py-2">
                    ${eventsHtml}
                </div>
            `;
            container.appendChild(dayCard);
        });
    }

    function renderInfo() {
        const container = document.getElementById('main-content');
        container.innerHTML = '';
        updateNavState(1);

        // Flights & Luggage
        container.innerHTML += `
            <div class="bg-white rounded-xl shadow-sm p-5 border border-stone-200">
                <h3 class="font-bold text-lg mb-4 text-jp-blue border-b pb-2">重要資訊</h3>
                
                <div class="mb-6">
                    <h4 class="text-sm font-bold text-gray-500 mb-2"><i class="fas fa-plane mr-2"></i>航班</h4>
                    <div class="bg-stone-50 p-3 rounded-lg text-sm mb-2">
                        <div class="flex justify-between"><span>去程 CI104</span> <span>12:40 TPE -> 16:55 NRT</span></div>
                    </div>
                    <div class="bg-stone-50 p-3 rounded-lg text-sm">
                        <div class="flex justify-between"><span>回程 CI221</span> <span>14:30 HND -> 16:55 TSA</span></div>
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="text-sm font-bold text-gray-500 mb-2"><i class="fas fa-suitcase mr-2"></i>行李寄送 (10/13)</h4>
                    <div class="bg-blue-50 p-3 rounded-lg text-xs text-blue-900 leading-relaxed select-all">
                        <strong>收件人：</strong>Spa & Hotel Maihama Eurasia<br>
                        <strong>地址：</strong>〒279-0032 Chiba, Urayasu, Chidori 13-20<br>
                        <strong>電話：</strong>047-351-4139<br>
                        *請註明入住日期與預約姓名
                    </div>
                </div>

                <div>
                    <h4 class="text-sm font-bold text-gray-500 mb-2"><i class="fas fa-bed mr-2"></i>住宿列表</h4>
                    ${tripData.info.hotels.map(h => `
                        <div class="mb-3 last:mb-0 border-l-2 border-jp-blue pl-3">
                            <div class="font-bold text-sm">${h.name}</div>
                            <div class="text-xs text-gray-500 mt-1">${h.addr}</div>
                            <div class="text-xs text-blue-600 mt-1"><a href="tel:${h.tel}">${h.tel}</a></div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function renderWallet() {
        const container = document.getElementById('main-content');
        container.innerHTML = '';
        updateNavState(2);

        container.innerHTML = `
            <div class="bg-white rounded-xl shadow-sm p-5 border border-stone-200">
                <h3 class="font-bold text-lg mb-4 text-jp-blue">簡易記帳</h3>
                <div class="flex justify-between items-center bg-green-50 p-4 rounded-lg mb-6">
                    <span class="text-green-800 text-sm">目前總支出</span>
                    <span class="text-2xl font-bold text-green-700">¥0</span>
                </div>
                
                <div class="text-center text-gray-400 py-10">
                    <i class="fas fa-receipt text-4xl mb-3"></i>
                    <p class="text-sm">資料儲存於本地瀏覽器<br>(此功能為展示用)</p>
                </div>
                
                <button class="w-full bg-jp-blue text-white py-3 rounded-lg shadow-md active:scale-95 transition">
                    <i class="fas fa-plus mr-2"></i>新增一筆消費
                </button>
            </div>
        `;
    }

    function updateNavState(index) {
        const navButtons = document.querySelectorAll('nav button');
        navButtons.forEach((btn, i) => {
            if (i === index) {
                btn.className = "flex flex-col items-center justify-center w-full h-full text-jp-blue focus:outline-none";
            } else {
                btn.className = "flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-jp-blue focus:outline-none";
            }
        });
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
        renderItinerary();
    });

</script>
</body>
</html>
